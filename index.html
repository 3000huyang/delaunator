<!DOCTYPE html>
<html>
<head>
    <title>Test</title>
    <style>
    canvas { border: 1px solid #ccc; width: 800px; height: 600px; }
    </style>
</head>
<body>

<canvas id="canvas" width="1600" height="1200"></canvas>

<script>
var canvas = document.getElementById('canvas');
var ctx = canvas.getContext('2d');

ctx.scale(2, 2);

ctx.lineJoin = 'round';
ctx.lineCap = 'round';

function draw() {
    ctx.clearRect(0, 0, 800, 600);

    ctx.beginPath();
    for (var i = 0; i < triangles.length; i += 6) {
        ctx.moveTo(coords[triangles[i + 0]], coords[triangles[i + 0] + 1]);
        ctx.lineTo(coords[triangles[i + 1]], coords[triangles[i + 1] + 1]);
        ctx.lineTo(coords[triangles[i + 2]], coords[triangles[i + 2] + 1]);
        ctx.closePath();
    }
    ctx.strokeStyle = 'green';
    ctx.lineWidth = 1;
    ctx.stroke();
    ctx.fillStyle = 'rgba(255,255,0,0.1)';
    ctx.fill();

    ctx.beginPath();
    ctx.moveTo(coords[hull.i], coords[hull.i + 1]);
    var e = hull;
    do {
        ctx.lineTo(coords[e.next.i], coords[e.next.i + 1]);
        e = e.next;
    } while (e !== hull);
    ctx.lineWidth = 2;
    ctx.strokeStyle = 'red';
    ctx.stroke();

    ctx.fillStyle = 'blue';
    ctx.beginPath();
    for (var i = 0; i < points.length; i++) {
        ctx.rect(points[i][0] - 1, points[i][1] - 1, 2, 2);
    }
    ctx.fill();
}

</script>
<script src="index.js"></script>
<script>

var gen = triangulate();

function frame() {
    if (gen.next().done) return;
    draw();
    // requestAnimationFrame(frame);
}
draw();

document.onkeypress = frame;
// requestAnimationFrame(frame);

</script>

</body>
</html>
